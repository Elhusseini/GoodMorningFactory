<!-- UI/Views/SettingsView.xaml -->
<UserControl x:Class="GoodMorningFactory.UI.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             mc:Ignorable="d" d:DesignHeight="600" d:DesignWidth="900"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             Background="{DynamicResource PrimaryBackground}" FlowDirection="RightToLeft">
    <TabControl Margin="10" FontSize="14">
        <!-- التبويب الأول: معلومات المصنع -->
        <TabItem Header="معلومات المصنع">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="15">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="اسم المصنع:"/>
                        <TextBox x:Name="CompanyNameTextBox" Grid.Row="0" Grid.Column="1" Margin="5"/>

                        <Label Grid.Row="1" Grid.Column="0" Content="العنوان:"/>
                        <TextBox x:Name="AddressTextBox" Grid.Row="1" Grid.Column="1" Margin="5"/>

                        <Label Grid.Row="2" Grid.Column="0" Content="المدينة / الدولة:"/>
                        <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal">
                            <TextBox x:Name="CityTextBox" Width="150" Margin="5"/>
                            <TextBox x:Name="CountryTextBox" Width="150" Margin="5"/>
                        </StackPanel>

                        <Label Grid.Row="3" Grid.Column="0" Content="الهاتف / البريد الإلكتروني:"/>
                        <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal">
                            <TextBox x:Name="PhoneNumberTextBox" Width="150" Margin="5"/>
                            <TextBox x:Name="EmailTextBox" Width="150" Margin="5" FlowDirection="LeftToRight"/>
                        </StackPanel>

                        <Label Grid.Row="4" Grid.Column="0" Content="الرقم الضريبي / السجل التجاري:"/>
                        <StackPanel Grid.Row="4" Grid.Column="1" Orientation="Horizontal">
                            <TextBox x:Name="TaxNumberTextBox" Width="150" Margin="5"/>
                            <TextBox x:Name="CommercialRegTextBox" Width="150" Margin="5"/>
                        </StackPanel>

                        <Border Grid.Column="2" Grid.Row="0" Grid.RowSpan="6" BorderBrush="Gray" BorderThickness="1" Margin="20,5,5,5" Padding="5">
                            <Image x:Name="LogoImage" Stretch="Uniform" Width="150" Height="150"/>
                        </Border>
                        <Button x:Name="UploadLogoButton" Content="تحميل الشعار..." Grid.Column="2" Grid.Row="6" VerticalAlignment="Top" Margin="20,5,5,5" Click="UploadLogoButton_Click"/>

                        <Button x:Name="SaveCompanyInfoButton" Content="💾 حفظ معلومات المصنع" Grid.Row="6" Grid.Column="1" HorizontalAlignment="Left" Padding="15,5" Margin="5" Click="SaveCompanyInfoButton_Click"/>
                    </Grid>

                    <!-- قسم المظهر -->
                    <GroupBox Header="المظهر (Theme)" Margin="5">
                        <StackPanel Orientation="Horizontal" Margin="10">
                            <RadioButton x:Name="LightThemeRadioButton" Content="فاتح (Light)" GroupName="Theme" IsChecked="True" Checked="ThemeRadioButton_Checked"/>
                            <RadioButton x:Name="DarkThemeRadioButton" Content="داكن (Dark)" GroupName="Theme" Margin="20,0,0,0" Checked="ThemeRadioButton_Checked"/>
                        </StackPanel>
                    </GroupBox>
                </StackPanel>
            </ScrollViewer>
        </TabItem>

        <!-- التبويب الثاني: الإعدادات العامة -->
        <TabItem Header="الإعدادات العامة">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="15">
                    <TextBlock TextWrapping="Wrap" Margin="0,0,0,15" Foreground="{DynamicResource PrimaryText}">
						هنا يمكنك ضبط الإعدادات العامة التي تؤثر على سلوك النظام ككل.
                    </TextBlock>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="لغة النظام الافتراضية:" VerticalAlignment="Center"/>
                        <ComboBox x:Name="LanguageComboBox" Grid.Row="0" Grid.Column="1" Margin="5" Width="200" HorizontalAlignment="Left"/>

                        <Label Grid.Row="1" Grid.Column="0" Content="تنسيق التاريخ الافتراضي:" VerticalAlignment="Center"/>
                        <ComboBox x:Name="DateFormatComboBox" Grid.Row="1" Grid.Column="1" Margin="5" Width="200" HorizontalAlignment="Left"/>

                        <Label Grid.Row="2" Grid.Column="0" Content="العملة الأساسية للنظام:" VerticalAlignment="Center"/>
                        <ComboBox x:Name="CurrencyComboBox" Grid.Row="2" Grid.Column="1" Margin="5" Width="200" HorizontalAlignment="Left"/>
                    </Grid>
                    <Button x:Name="SaveGeneralSettingsButton" Content="💾 حفظ الإعدادات العامة" HorizontalAlignment="Left" Padding="15,5" Margin="0,20,0,0" Click="SaveGeneralSettingsButton_Click"/>
                </StackPanel>
            </ScrollViewer>
        </TabItem>

        <!-- التبويب الثالث: إعدادات المستخدمين -->
        <TabItem Header="إعدادات المستخدمين">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="15">
                    <TextBlock Text="سياسة كلمة المرور" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="الحد الأدنى لطول كلمة المرور:"/>
                        <TextBox x:Name="MinPassLengthTextBox" Grid.Row="0" Grid.Column="1" Margin="5"/>
                        <Label Grid.Row="0" Grid.Column="2" Content="صلاحية كلمة المرور (يوم):"/>
                        <TextBox x:Name="PassExpiryTextBox" Grid.Row="0" Grid.Column="3" Margin="5"/>

                        <Label Grid.Row="1" Grid.Column="0" Content="محاولات الدخول الفاشلة قبل القفل:"/>
                        <TextBox x:Name="LockoutAttemptsTextBox" Grid.Row="1" Grid.Column="1" Margin="5"/>

                        <StackPanel Grid.Row="2" Grid.ColumnSpan="4" Orientation="Horizontal" Margin="0,10,0,0">
                            <CheckBox x:Name="RequireUppercaseCheckBox" Content="اشتراط أحرف كبيرة" Margin="5"/>
                            <CheckBox x:Name="RequireLowercaseCheckBox" Content="اشتراط أحرف صغيرة" Margin="5"/>
                            <CheckBox x:Name="RequireDigitCheckBox" Content="اشتراط أرقام" Margin="5"/>
                            <CheckBox x:Name="RequireSpecialCharCheckBox" Content="اشتراط رموز خاصة" Margin="5"/>
                        </StackPanel>
                    </Grid>

                    <Separator Margin="0,20"/>
                    <TextBlock Text="إعدادات أخرى" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="250"/>
                        </Grid.ColumnDefinitions>
                        <Label Content="الدور الافتراضي للمستخدمين الجدد:"/>
                        <ComboBox x:Name="DefaultRoleComboBox" Grid.Column="1" Margin="5" DisplayMemberPath="Name" SelectedValuePath="Id"/>
                    </Grid>

                    <Button x:Name="SaveUserSettingsButton" Content="💾 حفظ إعدادات المستخدمين" HorizontalAlignment="Left" Padding="15,5" Margin="0,20,0,0" Click="SaveUserSettingsButton_Click"/>
                </StackPanel>
            </ScrollViewer>
        </TabItem>

        <!-- التبويب الرابع: الترقيم التلقائي -->
        <TabItem Header="الترقيم التلقائي">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="15">
                    <TextBlock TextWrapping="Wrap" Margin="0,0,0,15" Foreground="{DynamicResource PrimaryText}">
						هنا يمكنك إدارة تسلسل الأرقام التلقائية للمستندات المختلفة في النظام.
                    </TextBlock>
                    <DataGrid x:Name="NumberingDataGrid" AutoGenerateColumns="False" CanUserAddRows="False">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="نوع المستند" Binding="{Binding DocumentType}" IsReadOnly="True" Width="2*"/>
                            <DataGridTextColumn Header="البادئة" Binding="{Binding Prefix}" Width="*"/>
                            <DataGridTextColumn Header="آخر رقم مستخدم" Binding="{Binding LastNumber}" Width="*"/>
                            <DataGridTextColumn Header="عدد الخانات" Binding="{Binding NumberOfDigits}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    <Button x:Name="SaveNumberingButton" Content="💾 حفظ إعدادات الترقيم" HorizontalAlignment="Left" Padding="15,5" Margin="0,20,0,0" Click="SaveNumberingButton_Click"/>
                </StackPanel>
            </ScrollViewer>
        </TabItem>

        <!-- التبويب الخامس: الحسابات الافتراضية -->
        <TabItem Header="الحسابات الافتراضية" FontSize="14">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="15">
                    <TextBlock TextWrapping="Wrap" Margin="0,0,0,15">
						هنا يمكنك تحديد الحسابات الافتراضية التي سيستخدمها النظام لإنشاء القيود المحاسبية تلقائياً عند حدوث عمليات البيع والشراء.
                    </TextBlock>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="حساب المبيعات الافتراضي:" VerticalAlignment="Center"/>
                        <ComboBox x:Name="SalesAccountComboBox" Grid.Row="0" Grid.Column="1" Margin="5" DisplayMemberPath="AccountName" SelectedValuePath="Id"/>

                        <Label Grid.Row="1" Grid.Column="0" Content="حساب العملاء (الذمم المدينة) الافتراضي:" VerticalAlignment="Center"/>
                        <ComboBox x:Name="AccountsReceivableComboBox" Grid.Row="1" Grid.Column="1" Margin="5" DisplayMemberPath="AccountName" SelectedValuePath="Id"/>

                        <Label Grid.Row="2" Grid.Column="0" Content="حساب المشتريات الافتراضي:" VerticalAlignment="Center" Foreground="{DynamicResource PrimaryText}"/>
                        <ComboBox x:Name="PurchasesAccountComboBox" Grid.Row="2" Grid.Column="1" Margin="5" DisplayMemberPath="AccountName" SelectedValuePath="Id"/>

                        <Label Grid.Row="3" Grid.Column="0" Content="حساب الموردين (الذمم الدائنة) الافتراضي:" VerticalAlignment="Center" Foreground="{DynamicResource PrimaryText}"/>
                        <ComboBox x:Name="AccountsPayableComboBox" Grid.Row="3" Grid.Column="1" Margin="5" DisplayMemberPath="AccountName" SelectedValuePath="Id"/>
                    </Grid>
                    <Button x:Name="SaveDefaultAccountsButton" Content="💾 حفظ الحسابات" HorizontalAlignment="Left" Padding="15,5" Margin="0,20,0,0" Click="SaveDefaultAccountsButton_Click"/>
                </StackPanel>
            </ScrollViewer>
        </TabItem>

        <!-- التبويب السادس: إعدادات الإشعارات -->
        <TabItem Header="إعدادات الإشعارات">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="15">
                    <TextBlock TextWrapping="Wrap" Margin="0,0,0,15" Foreground="{DynamicResource PrimaryText}">
						هنا يمكنك التحكم في الإشعارات التي يتم إرسالها عند وقوع أحداث معينة في النظام.
                    </TextBlock>
                    <DataGrid x:Name="NotificationsDataGrid" AutoGenerateColumns="False" CanUserAddRows="False">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="الحدث" Binding="{Binding Description}" IsReadOnly="True" Width="3*"/>
                            <DataGridCheckBoxColumn Header="تفعيل الإشعار" Binding="{Binding IsEnabled}" Width="*"/>
                            <DataGridCheckBoxColumn Header="إشعار داخل التطبيق" Binding="{Binding SendInApp}" Width="*"/>
                            <DataGridCheckBoxColumn Header="إرسال بريد إلكتروني" Binding="{Binding SendEmail}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    <Button x:Name="SaveNotificationsButton" Content="💾 حفظ إعدادات الإشعارات" HorizontalAlignment="Left" Padding="15,5" Margin="0,20,0,0" Click="SaveNotificationsButton_Click"/>
                </StackPanel>
            </ScrollViewer>
        </TabItem>

        <!-- التبويب السابع: النسخ الاحتياطي والاستعادة -->
        <TabItem Header="النسخ الاحتياطي والاستعادة">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <Grid Margin="15">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Button Content="💾 إنشاء نسخة احتياطية الآن" HorizontalAlignment="Left" Padding="15,5" Margin="5" Click="BackupButton_Click"/>

                    <GroupBox Header="النسخ الاحتياطية المتاحة" Grid.Row="1" Margin="0,10,0,0">
                        <ListView x:Name="BackupsListView">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="اسم الملف" DisplayMemberBinding="{Binding FileName}" Width="300"/>
                                    <GridViewColumn Header="تاريخ الإنشاء" DisplayMemberBinding="{Binding CreationDate, StringFormat='g'}" Width="150"/>
                                    <GridViewColumn Header="الحجم" DisplayMemberBinding="{Binding FileSize}" Width="100"/>
                                    <GridViewColumn Header="إجراءات" Width="150">
                                        <GridViewColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal">
                                                    <Button Content="استعادة" Click="RestoreButton_Click" Margin="2"/>
                                                    <Button Content="حذف" Click="DeleteBackupButton_Click" Background="LightCoral" Margin="2"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </GridViewColumn.CellTemplate>
                                    </GridViewColumn>
                                </GridView>
                            </ListView.View>
                        </ListView>
                    </GroupBox>
                </Grid>
            </ScrollViewer>
        </TabItem>
    </TabControl>
</UserControl>